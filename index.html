<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Nexus-X Starlink | Ingeniería Logística Élite</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #f59e0b; --deep: #020617; }
        body { font-family: 'Inter', sans-serif; background-color: var(--deep); color: #f1f5f9; overflow-x: hidden; }
        .font-nexus { font-family: 'Orbitron', sans-serif; }
        .hero-mesh { background-image: radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 100% 100%, rgba(245, 158, 11, 0.1) 0px, transparent 50%); }
        .grid-pattern { background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px); background-size: 40px 40px; }
        .glass-dark { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .btn-gold { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); transition: all 0.3s ease; }
        .neo-input { background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 15px; color: white; width: 100%; outline: none; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="hero-mesh">
    <div class="absolute inset-0 grid-pattern opacity-40 pointer-events-none"></div>

    <nav class="fixed top-0 w-full z-[100] glass-dark border-b border-white/5 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-gold p-2 rounded-lg"><i class="fas fa-satellite text-black text-xl"></i></div>
                <span class="font-nexus text-xl font-black">NEXUS<span class="text-gold">-X</span></span>
            </div>
            <button onclick="document.getElementById('modal-auth').classList.remove('hidden')" class="bg-white/5 px-6 py-2 rounded-full border border-white/10 text-[10px] font-black tracking-widest uppercase transition hover:bg-gold hover:text-black">Acceso Terminal</button>
        </div>
    </nav>

    <header class="relative min-h-screen flex items-center justify-center pt-20">
        <div class="max-w-6xl mx-auto px-6 text-center relative z-10">
            <h1 class="text-5xl md:text-8xl font-black mb-8 leading-[0.9] tracking-tighter">
                SISTEMA LOGÍSTICO <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold via-white to-gold uppercase italic">Nexus-X Élite</span>
            </h1>
            <p class="text-lg md:text-xl text-slate-400 mb-12 max-w-3xl mx-auto">Tecnología Starlink para el control total de flotas pesadas. Entre a la red global de ingeniería.</p>
            
            <div class="flex flex-col md:flex-row gap-6 justify-center">
                <button onclick="abrirAuth('TALLER')" class="btn-gold text-black font-black py-6 px-14 rounded-2xl text-sm tracking-widest uppercase flex items-center gap-4">
                    <i class="fas fa-microchip"></i> Activar Nodo Taller
                </button>
                <button onclick="abrirAuth('CLIENTE')" class="bg-white/5 border border-white/10 text-white font-black py-6 px-14 rounded-2xl text-sm tracking-widest uppercase">
                    Rastrear Camión
                </button>
            </div>
        </div>
    </header>

    <div id="modal-auth" class="fixed inset-0 z-[200] hidden flex items-center justify-center p-4 bg-black/90 backdrop-blur-md">
        <div class="glass-dark w-full max-w-md p-8 rounded-[2.5rem] border border-gold/20 shadow-2xl">
            <div class="text-center mb-8">
                <h3 id="auth-title" class="font-nexus text-xl text-gold mb-2">VALIDACIÓN DE NODO</h3>
                <p class="text-xs text-slate-500 uppercase tracking-widest">Ingrese credenciales Nexus-X</p>
            </div>
            <div class="space-y-4">
                <input id="auth-email" type="email" placeholder="ID STARLINK (Email)" class="neo-input">
                <input id="auth-pass" type="password" placeholder="CÓDIGO DE ACCESO" class="neo-input">
                <button id="btn-login" class="w-full btn-gold text-black font-black py-4 rounded-xl uppercase text-xs tracking-[3px]">Inicializar Sistema</button>
                <button onclick="document.getElementById('modal-auth').classList.add('hidden')" class="w-full text-slate-600 text-[10px] uppercase font-bold">Cancelar Despliegue</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAdk-s-OXu57MiobzRGBRu-TlF2KYeicWQ",
            authDomain: "tallerpro360.firebaseapp.com",
            projectId: "tallerpro360",
            storageBucket: "tallerpro360.appspot.com",
            messagingSenderId: "636224778184",
            appId: "1:636224778184:web:9bd7351b6458a1ef625afd"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let targetModule = 'TALLER';

        window.abrirAuth = (modulo) => {
            targetModule = modulo;
            document.getElementById('auth-title').innerText = `ACCESO ${modulo}`;
            document.getElementById('modal-auth').classList.remove('hidden');
        };

        document.getElementById('btn-login').onclick = async () => {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, pass);
                // Tracker de éxito
                await addDoc(collection(db, "accesos_exitosos"), {
                    uid: userCredential.user.uid,
                    perfil: targetModule,
                    timestamp: serverTimestamp()
                });
                
                // Redirección segura
                window.location.href = targetModule === 'TALLER' ? "taller.html" : "cliente.html";
            } catch (e) {
                alert("ERROR DE SINCRONIZACIÓN: Credenciales no válidas en la red Nexus.");
            }
        };

        // ACCESO SECRETO CEO
        let combo = {};
        window.onkeydown = (e) => {
            combo[e.key.toLowerCase()] = true;
            if(combo['c'] && combo['e'] && combo['o']) window.location.href = "ceo.html";
        };
        window.onkeyup = (e) => combo[e.key.toLowerCase()] = false;
    </script>
</body>
</html>
